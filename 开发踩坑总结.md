## 遇到问题不要慌，遇到问题多总结

##### 编译通过，发布失败
​       代码发布测试环境失败，但是部署工具并没有给出部署失败原因，编译是通过，这种情况获取测试分支代码，并运行，找到问题代码，本地启动正常，则重新部署，可能部署环境有问题

##### 生产环境一次空指针
​       对map、List 判空 错误，比如 List<String> list = null, 对于这种情况使用 list.isEmpty(),会报空指针异常 因为list 本身就是null，使用集合类判空

##### Comparator 接口 实现 compare 方法 时 要满足可逆行性，主要是对于 比较对象的equal 处理

##### 生成环境 企业认证联系邮箱非注册邮箱问题排查

- 第一次走测试环境、生产环境进行复现，都正常，无异常日志，且邮箱
- 显示联系邮箱为一个频繁出现邮箱，后确定为前端获取不到注册邮箱 时写死邮箱，让前端排查调用相关接口
- 根据接口排查相关代码【要review 全部功能，中间大意只排查了部分代码，给出错误结论】
- 向之前写代码人请教，并重新复现，问题出现在暂存功能
- 结论：review 代码要仔细，熟悉整个业务流程，而不仅仅走其中部分业务流程，最好有熟悉流程测试配合，能快速定位问题

**因为开发环境和测试环境隔离，导致测试环境排查问题很难，类比生产环境和开发环境隔离，这种情况最简单办法就是在开发阶段就要有意识的多记录log**

**grep -C 参数很好用，排查上下文信息**

##### 文件上传远程服务器失败，花费了大概一天时间

- 先使用项目中老代码，使用公司jar 包上次报post 方式不允许，这段代码使用频繁且运行很长时间，如果有问题，业务人员早会反馈，并观察这段代码前后业务日志，业务正常

- 换业务上传其他方法，同样调用不同，都能获取到jar上传的token，有时会链接重置

- 最后更改文件名为英文名

  问题总结： 提供给别人jar包，返回信息要明确 ；当多次调用不通情况下，最好向提供方要接口文档

##### logbook DMC 很好用，生成业务id，追踪代码

##### spring @Value 注解 如果赋值boolean 值给一个变量，记得变量也需要是boolean值类型

##### mq 消费问题，测试环境 mq消费日志总是会丢失，刚开始以为是日志系统同步问题，后来发现是多个应用引入了相同消费者包





